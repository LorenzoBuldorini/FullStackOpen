{"ast":null,"code":"import _objectSpread from\"C:/FullStackOpen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/FullStackOpen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/FullStackOpen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import Filter from\"./components/Filter\";import PersonForm from\"./components/PersonForm\";import Persons from\"./components/Persons\";import Notification from\"./components/Notification\";import entryService from\"./services/entryService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setSearch=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),notification=_useState10[0],setNotification=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showMsg=_useState12[0],setShowMsg=_useState12[1];function submitForm(e){e.preventDefault();if(!persons.some(function(person){return person.name===newName;})){entryService.createPerson({name:newName,number:newNumber}).then(function(response){setPersons([].concat(_toConsumableArray(persons),[response]));setNotification({status:\"success\",msg:\"Success: You added \".concat(newName,\" to the Phonebook!\")});setShowMsg(true);}).catch(function(err){console.log(err);setNotification({status:\"error\",msg:\"Error: \".concat(err.response.data.error)});setShowMsg(true);});setNewName(\"\");setNewNumber(\"\");}else{if(window.confirm(\"\".concat(newName,\" is already added, do you want to replace the old number with a new one?\"))){var personObj=persons.find(function(person){return person.name===newName;});var changedPerson=_objectSpread(_objectSpread({},personObj),{},{number:newNumber});entryService.updatePerson(personObj._id,changedPerson).then(function(response){setPersons(function(prevState){return prevState.map(function(person){return person._id!==personObj._id?person:response;});});setNotification({status:\"success\",msg:\"Success: You edited \".concat(newName,\"'s number in the Phonebook!\")});setShowMsg(true);}).catch(function(err){setNotification({status:\"error\",msg:\"Error: \".concat(err)});setShowMsg(true);});}}}function deletePerson(personName){if(window.confirm(\"Are you sure you want to delete \".concat(personName))){var personObj=persons.find(function(person){return person.name===personName;});entryService.deletePerson(personObj._id,personObj).then(function(response){setPersons(function(prevState){setNotification({status:\"success\",msg:\"Success: You deleted \".concat(personObj.name,\" in the Phonebook!\")});setShowMsg(true);return prevState.filter(function(person){return person._id!==personObj._id;});});}).catch(function(err){setNotification({status:\"error\",msg:\"Error: \".concat(personObj.name,\" has already been deleted\")});setShowMsg(true);});}}useEffect(function(){entryService.getAll().then(function(response){setPersons(response);});},[]);useEffect(function(){if(showMsg){var toRef=setTimeout(function(){setShowMsg(false);clearTimeout(toRef);},3000);}},[showMsg]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),showMsg&&/*#__PURE__*/_jsx(Notification,{status:notification.status,message:notification.msg}),/*#__PURE__*/_jsx(Filter,{search:search,persons:persons,setSearch:setSearch}),/*#__PURE__*/_jsx(\"h3\",{children:\"Add new\"}),/*#__PURE__*/_jsx(PersonForm,{newName:newName,newNumber:newNumber,submitForm:submitForm,setNewName:setNewName,setNewNumber:setNewNumber}),/*#__PURE__*/_jsx(\"h3\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{persons:persons,deletePerson:deletePerson})]});};export default App;","map":{"version":3,"names":["useState","useEffect","Filter","PersonForm","Persons","Notification","entryService","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","search","setSearch","notification","setNotification","showMsg","setShowMsg","submitForm","e","preventDefault","some","person","name","createPerson","number","then","response","status","msg","catch","err","console","log","data","error","window","confirm","personObj","find","changedPerson","updatePerson","_id","prevState","map","deletePerson","personName","filter","getAll","toRef","setTimeout","clearTimeout"],"sources":["C:/FullStackOpen/part2/phonebook/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nimport entryService from \"./services/entryService\";\r\n\r\nconst App = () => {\r\n\tconst [persons, setPersons] = useState([]);\r\n\tconst [newName, setNewName] = useState(\"\");\r\n\tconst [newNumber, setNewNumber] = useState(\"\");\r\n\tconst [search, setSearch] = useState(\"\");\r\n\tconst [notification, setNotification] = useState(\"\");\r\n\tconst [showMsg, setShowMsg] = useState(false);\r\n\r\n\tfunction submitForm(e) {\r\n\t\te.preventDefault();\r\n\t\tif (!persons.some((person) => person.name === newName)) {\r\n\t\t\tentryService\r\n\t\t\t\t.createPerson({\r\n\t\t\t\t\tname: newName,\r\n\t\t\t\t\tnumber: newNumber,\r\n\t\t\t\t})\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tsetPersons([...persons, response]);\r\n\t\t\t\t\tsetNotification({\r\n\t\t\t\t\t\tstatus: \"success\",\r\n\t\t\t\t\t\tmsg: `Success: You added ${newName} to the Phonebook!`,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetShowMsg(true);\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\tsetNotification({\r\n\t\t\t\t\t\tstatus: \"error\",\r\n\t\t\t\t\t\tmsg: `Error: ${err.response.data.error}`,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetShowMsg(true);\r\n\t\t\t\t});\r\n\r\n\t\t\tsetNewName(\"\");\r\n\t\t\tsetNewNumber(\"\");\r\n\t\t} else {\r\n\t\t\tif (\r\n\t\t\t\twindow.confirm(\r\n\t\t\t\t\t`${newName} is already added, do you want to replace the old number with a new one?`\r\n\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\tconst personObj = persons.find((person) => person.name === newName);\r\n\t\t\t\tconst changedPerson = { ...personObj, number: newNumber };\r\n\r\n\t\t\t\tentryService\r\n\t\t\t\t\t.updatePerson(personObj._id, changedPerson)\r\n\t\t\t\t\t.then((response) => {\r\n\t\t\t\t\t\tsetPersons((prevState) => {\r\n\t\t\t\t\t\t\treturn prevState.map((person) =>\r\n\t\t\t\t\t\t\t\tperson._id !== personObj._id ? person : response\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetNotification({\r\n\t\t\t\t\t\t\tstatus: \"success\",\r\n\t\t\t\t\t\t\tmsg: `Success: You edited ${newName}'s number in the Phonebook!`,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetShowMsg(true);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\tsetNotification({\r\n\t\t\t\t\t\t\tstatus: \"error\",\r\n\t\t\t\t\t\t\tmsg: `Error: ${err}`,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetShowMsg(true);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction deletePerson(personName) {\r\n\t\tif (window.confirm(`Are you sure you want to delete ${personName}`)) {\r\n\t\t\tconst personObj = persons.find((person) => person.name === personName);\r\n\t\t\tentryService\r\n\t\t\t\t.deletePerson(personObj._id, personObj)\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tsetPersons((prevState) => {\r\n\t\t\t\t\t\tsetNotification({\r\n\t\t\t\t\t\t\tstatus: \"success\",\r\n\t\t\t\t\t\t\tmsg: `Success: You deleted ${personObj.name} in the Phonebook!`,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetShowMsg(true);\r\n\t\t\t\t\t\treturn prevState.filter((person) => person._id !== personObj._id);\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tsetNotification({\r\n\t\t\t\t\t\tstatus: \"error\",\r\n\t\t\t\t\t\tmsg: `Error: ${personObj.name} has already been deleted`,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetShowMsg(true);\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tentryService.getAll().then((response) => {\r\n\t\t\tsetPersons(response);\r\n\t\t});\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showMsg) {\r\n\t\t\tconst toRef = setTimeout(() => {\r\n\t\t\t\tsetShowMsg(false);\r\n\t\t\t\tclearTimeout(toRef);\r\n\t\t\t}, 3000);\r\n\t\t}\r\n\t}, [showMsg]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h2>Phonebook</h2>\r\n\t\t\t{showMsg && (\r\n\t\t\t\t<Notification status={notification.status} message={notification.msg} />\r\n\t\t\t)}\r\n\t\t\t<Filter search={search} persons={persons} setSearch={setSearch} />\r\n\t\t\t<h3>Add new</h3>\r\n\t\t\t<PersonForm\r\n\t\t\t\tnewName={newName}\r\n\t\t\t\tnewNumber={newNumber}\r\n\t\t\t\tsubmitForm={submitForm}\r\n\t\t\t\tsetNewName={setNewName}\r\n\t\t\t\tsetNewNumber={setNewNumber}\r\n\t\t\t/>\r\n\t\t\t<h3>Numbers</h3>\r\n\t\t\t<Persons persons={persons} deletePerson={deletePerson} />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}