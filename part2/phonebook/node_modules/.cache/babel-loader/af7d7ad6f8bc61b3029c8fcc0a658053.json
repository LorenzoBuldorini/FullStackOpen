{"ast":null,"code":"var _jsxFileName = \"C:\\\\FullStackOpen\\\\part2\\\\phonebook\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Notification from \"./components/Notification\";\nimport entryService from \"./services/entryService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [notification, setNotification] = useState(\"\");\n  const [showMsg, setShowMsg] = useState(false);\n\n  function submitForm(e) {\n    e.preventDefault();\n\n    if (!persons.some(person => person.name === newName)) {\n      entryService.createPerson({\n        name: newName,\n        number: newNumber\n      }).then(response => {\n        setPersons([...persons, response]);\n        setNotification({\n          status: \"success\",\n          msg: `Success: You added ${newName} to the Phonebook!`\n        });\n        setShowMsg(true);\n      }).catch(err => {\n        console.log(err);\n        setNotification({\n          status: \"error\",\n          msg: `Error: ${err.response.data.error}`\n        });\n        setShowMsg(true);\n      });\n      setNewName(\"\");\n      setNewNumber(\"\");\n    } else {\n      if (window.confirm(`${newName} is already added, do you want to replace the old number with a new one?`)) {\n        const personObj = persons.find(person => person.name === newName);\n        const changedPerson = { ...personObj,\n          number: newNumber\n        };\n        entryService.updatePerson(personObj._id, changedPerson).then(response => {\n          setPersons(prevState => {\n            return prevState.map(person => person._id !== personObj._id ? person : response);\n          });\n          setNotification({\n            status: \"success\",\n            msg: `Success: You edited ${newName}'s number in the Phonebook!`\n          });\n          setShowMsg(true);\n        }).catch(err => {\n          setNotification({\n            status: \"error\",\n            msg: `Error: ${err}`\n          });\n          setShowMsg(true);\n        });\n      }\n    }\n  }\n\n  function deletePerson(personName) {\n    if (window.confirm(`Are you sure you want to delete ${personName}`)) {\n      const personObj = persons.find(person => person.name === personName);\n      entryService.deletePerson(personObj._id, personObj).then(response => {\n        setPersons(prevState => {\n          setNotification({\n            status: \"success\",\n            msg: `Success: You deleted ${personObj.name} in the Phonebook!`\n          });\n          setShowMsg(true);\n          return prevState.filter(person => person._id !== personObj._id);\n        });\n      }).catch(err => {\n        setNotification({\n          status: \"error\",\n          msg: `Error: ${personObj.name} has already been deleted`\n        });\n        setShowMsg(true);\n      });\n    }\n  }\n\n  useEffect(() => {\n    entryService.getAll().then(response => {\n      setPersons(response);\n    });\n  }, []);\n  useEffect(() => {\n    if (showMsg) {\n      const toRef = setTimeout(() => {\n        setShowMsg(false);\n        clearTimeout(toRef);\n      }, 3000);\n    }\n  }, [showMsg]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 4\n    }, this), showMsg && /*#__PURE__*/_jsxDEV(Notification, {\n      status: notification.status,\n      message: notification.msg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Filter, {\n      search: search,\n      persons: persons,\n      setSearch: setSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Add new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(PersonForm, {\n      newName: newName,\n      newNumber: newNumber,\n      submitForm: submitForm,\n      setNewName: setNewName,\n      setNewNumber: setNewNumber\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Persons, {\n      persons: persons,\n      deletePerson: deletePerson\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 3\n  }, this);\n};\n\n_s(App, \"DHpsOE2vLlKWV99gHvURMASbVFM=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","Filter","PersonForm","Persons","Notification","entryService","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","search","setSearch","notification","setNotification","showMsg","setShowMsg","submitForm","e","preventDefault","some","person","name","createPerson","number","then","response","status","msg","catch","err","console","log","data","error","window","confirm","personObj","find","changedPerson","updatePerson","_id","prevState","map","deletePerson","personName","filter","getAll","toRef","setTimeout","clearTimeout"],"sources":["C:/FullStackOpen/part2/phonebook/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nimport entryService from \"./services/entryService\";\r\n\r\nconst App = () => {\r\n\tconst [persons, setPersons] = useState([]);\r\n\tconst [newName, setNewName] = useState(\"\");\r\n\tconst [newNumber, setNewNumber] = useState(\"\");\r\n\tconst [search, setSearch] = useState(\"\");\r\n\tconst [notification, setNotification] = useState(\"\");\r\n\tconst [showMsg, setShowMsg] = useState(false);\r\n\r\n\tfunction submitForm(e) {\r\n\t\te.preventDefault();\r\n\t\tif (!persons.some((person) => person.name === newName)) {\r\n\t\t\tentryService\r\n\t\t\t\t.createPerson({\r\n\t\t\t\t\tname: newName,\r\n\t\t\t\t\tnumber: newNumber,\r\n\t\t\t\t})\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tsetPersons([...persons, response]);\r\n\t\t\t\t\tsetNotification({\r\n\t\t\t\t\t\tstatus: \"success\",\r\n\t\t\t\t\t\tmsg: `Success: You added ${newName} to the Phonebook!`,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetShowMsg(true);\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\tsetNotification({\r\n\t\t\t\t\t\tstatus: \"error\",\r\n\t\t\t\t\t\tmsg: `Error: ${err.response.data.error}`,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetShowMsg(true);\r\n\t\t\t\t});\r\n\r\n\t\t\tsetNewName(\"\");\r\n\t\t\tsetNewNumber(\"\");\r\n\t\t} else {\r\n\t\t\tif (\r\n\t\t\t\twindow.confirm(\r\n\t\t\t\t\t`${newName} is already added, do you want to replace the old number with a new one?`\r\n\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\tconst personObj = persons.find((person) => person.name === newName);\r\n\t\t\t\tconst changedPerson = { ...personObj, number: newNumber };\r\n\r\n\t\t\t\tentryService\r\n\t\t\t\t\t.updatePerson(personObj._id, changedPerson)\r\n\t\t\t\t\t.then((response) => {\r\n\t\t\t\t\t\tsetPersons((prevState) => {\r\n\t\t\t\t\t\t\treturn prevState.map((person) =>\r\n\t\t\t\t\t\t\t\tperson._id !== personObj._id ? person : response\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetNotification({\r\n\t\t\t\t\t\t\tstatus: \"success\",\r\n\t\t\t\t\t\t\tmsg: `Success: You edited ${newName}'s number in the Phonebook!`,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetShowMsg(true);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\tsetNotification({\r\n\t\t\t\t\t\t\tstatus: \"error\",\r\n\t\t\t\t\t\t\tmsg: `Error: ${err}`,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetShowMsg(true);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction deletePerson(personName) {\r\n\t\tif (window.confirm(`Are you sure you want to delete ${personName}`)) {\r\n\t\t\tconst personObj = persons.find((person) => person.name === personName);\r\n\t\t\tentryService\r\n\t\t\t\t.deletePerson(personObj._id, personObj)\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tsetPersons((prevState) => {\r\n\t\t\t\t\t\tsetNotification({\r\n\t\t\t\t\t\t\tstatus: \"success\",\r\n\t\t\t\t\t\t\tmsg: `Success: You deleted ${personObj.name} in the Phonebook!`,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetShowMsg(true);\r\n\t\t\t\t\t\treturn prevState.filter((person) => person._id !== personObj._id);\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tsetNotification({\r\n\t\t\t\t\t\tstatus: \"error\",\r\n\t\t\t\t\t\tmsg: `Error: ${personObj.name} has already been deleted`,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetShowMsg(true);\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tentryService.getAll().then((response) => {\r\n\t\t\tsetPersons(response);\r\n\t\t});\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showMsg) {\r\n\t\t\tconst toRef = setTimeout(() => {\r\n\t\t\t\tsetShowMsg(false);\r\n\t\t\t\tclearTimeout(toRef);\r\n\t\t\t}, 3000);\r\n\t\t}\r\n\t}, [showMsg]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h2>Phonebook</h2>\r\n\t\t\t{showMsg && (\r\n\t\t\t\t<Notification status={notification.status} message={notification.msg} />\r\n\t\t\t)}\r\n\t\t\t<Filter search={search} persons={persons} setSearch={setSearch} />\r\n\t\t\t<h3>Add new</h3>\r\n\t\t\t<PersonForm\r\n\t\t\t\tnewName={newName}\r\n\t\t\t\tnewNumber={newNumber}\r\n\t\t\t\tsubmitForm={submitForm}\r\n\t\t\t\tsetNewName={setNewName}\r\n\t\t\t\tsetNewNumber={setNewNumber}\r\n\t\t\t/>\r\n\t\t\t<h3>Numbers</h3>\r\n\t\t\t<Persons persons={persons} deletePerson={deletePerson} />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}