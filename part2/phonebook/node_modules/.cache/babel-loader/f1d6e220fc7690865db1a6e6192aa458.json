{"ast":null,"code":"import _objectSpread from\"C:/FullStackOpen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/FullStackOpen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import Content from'./components/Content';import Filter from'./components/Filter';import Notification from'./components/Notification';import PersonForm from'./components/PersonForm';import personService from'./services/persons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),allPersons=_useState4[0],setAllPersons=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newName=_useState6[0],setNewName=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newNumber=_useState8[0],setNewNumber=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),newFilter=_useState10[0],setNewFilter=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),message=_useState12[0],setMessage=_useState12[1];useEffect(function(){personService.getAll().then(function(initialPersons){setAllPersons(initialPersons);});},[]);var addPerson=function addPerson(event){event.preventDefault();var person=allPersons.filter(function(person){return person.name===newName;});var personToAdd=person[0];var updatedPerson=_objectSpread(_objectSpread({},personToAdd),{},{number:newNumber});if(person.length!==0){if(window.confirm(\"\".concat(personToAdd.name,\" is already added to the phonebook, replace the old number with a new one ?\"))){personService.update(updatedPerson.id,updatedPerson).then(function(returnedPerson){console.log(\"\".concat(returnedPerson.name,\" successfully updated\"));setAllPersons(allPersons.map(function(personItem){return personItem.id!==personToAdd.id?personItem:returnedPerson;}));setNewName('');setNewNumber('');setMessage(\"\".concat(updatedPerson.name,\" was successfully updated\"));setTimeout(function(){setMessage(null);},5000);}).catch(function(error){console.log(error);setAllPersons(allPersons.filter(function(person){return person.id!==updatedPerson.id;}));setNewName('');setNewNumber('');setMessage(\"[ERROR] \".concat(updatedPerson.name,\" was already deleted from server\"));setTimeout(function(){setMessage(null);},5000);});}}else{var _personToAdd={name:newName,number:newNumber};personService.create(_personToAdd).then(function(returnedPerson){setAllPersons(allPersons.concat(returnedPerson));setNewName('');setNewNumber('');setMessage(\"\".concat(newName,\" was successfully added\"));setTimeout(function(){setMessage(null);},5000);}).catch(function(error){setMessage(\"[ERROR] \".concat(error.response.data.error));setTimeout(function(){setMessage(null);},5000);console.log(error.response.data);});}};var deletePerson=function deletePerson(id){var filteredPerson=allPersons.filter(function(person){return person.id===id;});var personName=filteredPerson[0].name;var personId=filteredPerson[0].id;if(window.confirm(\"Delete \".concat(personName,\" ?\"))){personService.remove(personId);console.log(\"\".concat(personName,\" successfully deleted\"));setMessage(\"\".concat(personName,\" was successfully deleted\"));setAllPersons(allPersons.filter(function(person){return person.id!==personId;}));setTimeout(function(){setMessage(null);},5000);}};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};var handleFilterChange=function handleFilterChange(event){setNewFilter(event.target.value);var regex=new RegExp(newFilter,'i');var filteredPersons=function filteredPersons(){return allPersons.filter(function(person){return person.name.match(regex);});};setPersons(filteredPersons);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:message}),/*#__PURE__*/_jsx(Filter,{value:newFilter,onChange:handleFilterChange}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add new person\"}),/*#__PURE__*/_jsx(PersonForm,{onSubmit:addPerson,newName:newName,handleNameChange:handleNameChange,newNumber:newNumber,handleNumberChange:handleNumberChange}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Content,{persons:persons,allPersons:allPersons,deletePerson:deletePerson})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","Content","Filter","Notification","PersonForm","personService","App","persons","setPersons","allPersons","setAllPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","message","setMessage","getAll","then","initialPersons","addPerson","event","preventDefault","person","filter","name","personToAdd","updatedPerson","number","length","window","confirm","update","id","returnedPerson","console","log","map","personItem","setTimeout","catch","error","create","concat","response","data","deletePerson","filteredPerson","personName","personId","remove","handleNameChange","target","value","handleNumberChange","handleFilterChange","regex","RegExp","filteredPersons","match"],"sources":["C:/FullStackOpen/part2/phonebook/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport Content from './components/Content'\r\nimport Filter from './components/Filter'\r\nimport Notification from './components/Notification'\r\nimport PersonForm from './components/PersonForm'\r\nimport personService from './services/persons'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n  const [ allPersons, setAllPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [newFilter, setNewFilter] = useState('')\r\n  const [message, setMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n      setAllPersons(initialPersons)\r\n    })\r\n  }, [])\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const person = allPersons.filter((person) =>\r\n        person.name === newName\r\n    )\r\n\r\n    const personToAdd = person[0]\r\n    const updatedPerson = { ...personToAdd, number: newNumber }\r\n\r\n    if (person.length !== 0) {\r\n      if (window.confirm(`${personToAdd.name} is already added to the phonebook, replace the old number with a new one ?`)) {\r\n        personService\r\n          .update(updatedPerson.id, updatedPerson).then(returnedPerson => {\r\n            console.log(`${returnedPerson.name} successfully updated`)\r\n            setAllPersons(allPersons.map(personItem => personItem.id !== personToAdd.id ? personItem : returnedPerson))\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setMessage(\r\n              `${updatedPerson.name} was successfully updated`\r\n            )\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 5000)\r\n          })\r\n          .catch((error) => {\r\n            console.log(error)\r\n            setAllPersons(allPersons.filter(person => person.id !== updatedPerson.id))\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setMessage(\r\n              `[ERROR] ${updatedPerson.name} was already deleted from server`\r\n            )\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 5000)\r\n          })\r\n      }\r\n    } else {\r\n        const personToAdd = {\r\n            name: newName,\r\n            number: newNumber\r\n          }\r\n          personService\r\n            .create(personToAdd)\r\n            .then(returnedPerson => {\r\n              setAllPersons(allPersons.concat(returnedPerson))\r\n              setNewName('')\r\n              setNewNumber('')\r\n              setMessage(\r\n                `${newName} was successfully added`\r\n              )\r\n              setTimeout(() => {\r\n                setMessage(null)\r\n              }, 5000)\r\n            })\r\n            .catch(error => {\r\n              setMessage(\r\n                `[ERROR] ${error.response.data.error}`\r\n              )\r\n              setTimeout(() => {\r\n                setMessage(null)\r\n              }, 5000)\r\n              console.log(error.response.data)\r\n            })\r\n    }\r\n  }\r\n\r\n  const deletePerson = (id) => {\r\n    const filteredPerson = allPersons.filter(person => person.id === id)\r\n    const personName = filteredPerson[0].name\r\n    const personId = filteredPerson[0].id\r\n    if (window.confirm(`Delete ${personName} ?`)) {\r\n      personService\r\n        .remove(personId)\r\n      console.log(`${personName} successfully deleted`)\r\n      setMessage(\r\n        `${personName} was successfully deleted`\r\n      )\r\n      setAllPersons(allPersons.filter(person => person.id !== personId))\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    setNewFilter(event.target.value)\r\n    const regex = new RegExp( newFilter, 'i' );\r\n    const filteredPersons = () => allPersons.filter(person => person.name.match(regex))\r\n    setPersons(filteredPersons)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} />\r\n      <Filter value={newFilter} onChange={handleFilterChange} />\r\n      <h2>Add new person</h2>\r\n      <PersonForm onSubmit={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\r\n      <h2>Numbers</h2>\r\n      <Content persons={persons} allPersons={allPersons} deletePerson={deletePerson} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module"}