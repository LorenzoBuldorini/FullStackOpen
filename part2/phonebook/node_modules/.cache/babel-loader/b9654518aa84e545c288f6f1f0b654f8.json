{"ast":null,"code":"var _jsxFileName = \"C:\\\\FullStackOpen\\\\part2\\\\phonebook\\\\src\\\\App.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport Persons from \"./components/Persons\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport phonebookservice from \"../src/services/phonebookservice\";\nimport Notification from \"../src/components/Notification\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filter, setFilter] = useState('');\n  const [message, setMessage] = useState(null);\n  useEffect(() => {\n    phonebookservice.getAll().then(initialPeople => {\n      setPersons(initialPeople);\n    }).catch(error => console.log(\"GET error\", error.message));\n  }, []);\n\n  const handleFilterChange = event => {\n    console.log(\"filter\", event.target.value);\n    setFilter(event.target.value);\n  };\n\n  const handleNameChange = event => {\n    console.log(event.target.value);\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    console.log(event.target.value);\n    setNewNumber(event.target.value);\n  };\n\n  const handleDeletePerson = id => {\n    let personToDelete = persons.filter(p => p.id === id);\n    let nameToDelete = personToDelete[0].name;\n    let idToDelete = personToDelete[0].id;\n\n    if (window.confirm(`Confirm to delete ${nameToDelete} ${idToDelete}`)) {\n      phonebookservice.deletePerson(idToDelete).then(response => response.data);\n      setMessage(`Deleted ${nameToDelete}`);\n      setPersons(persons.filter(person => person.id !== idToDelete));\n    }\n  };\n\n  const addPerson = event => {\n    event.preventDefault();\n    const person = {\n      name: newName,\n      number: newNumber\n    }; //console.log(\"new person\",person)\n\n    let names = persons.map(p => p.name);\n\n    if (!names.includes(person.name)) {\n      setPersons(persons.concat(person));\n      phonebookservice.create(person).then(np => {\n        setPersons(persons.concat(np));\n        setNewName('');\n        setMessage(`Added ${person.name}`);\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n      }).catch(error => {\n        setChangeMessage(`[error] ${error.response.data.error}`);\n      });\n    } else if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n      let personToUpdate = persons.find(p => p.name === person.name); //console.log(\"person to update\",personToUpdate)\n\n      phonebookservice //.update(updatedPerson)\n      .update(personToUpdate, newNumber).then(returnedPerson => {\n        console.log(\"successfully updated\", returnedPerson);\n        setPersons(persons.map(p => p.id !== person.id ? p : returnedPerson));\n        setMessage(`Updated ${returnedPerson.name}'s number to ${returnedPerson.number}`);\n        setNewName('');\n        setNewNumber('');\n      }).catch(error => {\n        setMessage(`ERROR: ${personToUpdate.name} was already removed from server`);\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000); //setPersons(persons.filter(n => n.id !== personToUpdate.id))\n      });\n    }\n\n    setNewName('');\n    setNewNumber('');\n  };\n\n  console.log(\"people \", persons);\n  let filteredpersons = persons.filter(p => p.name.toLowerCase().includes(filter.toLowerCase()));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Notification, {\n      message: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Filter, {\n      filter: filter,\n      handleFilterChange: handleFilterChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"add a new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PersonForm, {\n      newName: newName,\n      newNumber: newNumber,\n      addPerson: addPerson,\n      handleNameChange: handleNameChange,\n      handleNumberChange: handleNumberChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Persons, {\n      people: filteredpersons,\n      handleDeletePerson: handleDeletePerson\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"SlgFAWYcFrtHldlHYoGNP1bctfk=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","Persons","Filter","PersonForm","phonebookservice","Notification","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","message","setMessage","getAll","then","initialPeople","catch","error","console","log","handleFilterChange","event","target","value","handleNameChange","handleNumberChange","handleDeletePerson","id","personToDelete","p","nameToDelete","name","idToDelete","window","confirm","deletePerson","response","data","person","addPerson","preventDefault","number","names","map","includes","concat","create","np","setTimeout","setChangeMessage","personToUpdate","find","update","returnedPerson","filteredpersons","toLowerCase"],"sources":["C:/FullStackOpen/part2/phonebook/src/App.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport Persons from \"./components/Persons\";\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport phonebookservice from \"../src/services/phonebookservice\"\r\nimport Notification from \"../src/components/Notification\";\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]) \r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [filter, setFilter] = useState('')\r\n  const [message,setMessage] = useState(null)\r\n  useEffect(() =>{\r\n    phonebookservice\r\n      .getAll()\r\n      .then(initialPeople => {\r\n        setPersons(initialPeople)\r\n      })\r\n      .catch(error => console.log(\"GET error\",error.message))\r\n  },[])  \r\n\r\n  const handleFilterChange = (event) => {\r\n    console.log(\"filter\",event.target.value)\r\n    setFilter(event.target.value)\r\n  }\r\n   const handleNameChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n  const handleNumberChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleDeletePerson = (id) => {\r\n    let personToDelete = persons.filter(p => p.id === id)\r\n    let nameToDelete = personToDelete[0].name\r\n    let idToDelete = personToDelete[0].id\r\n    if(window.confirm(`Confirm to delete ${nameToDelete} ${idToDelete}`)) {\r\n      phonebookservice\r\n        .deletePerson(idToDelete)\r\n        .then(response => response.data)\r\n      setMessage(`Deleted ${nameToDelete}`)\r\n      setPersons(persons.filter(person => person.id !== idToDelete))\r\n    }\r\n  }\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const person = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    //console.log(\"new person\",person)\r\n    let names = persons.map(p => p.name)\r\n    if(!names.includes(person.name)){\r\n      setPersons(persons.concat(person))\r\n      phonebookservice\r\n        .create(person)\r\n        .then(np => {\r\n          setPersons(persons.concat(np))\r\n          setNewName('')\r\n          setMessage(`Added ${person.name}`)\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 5000)\r\n        })\r\n        .catch(error => {\r\n          setChangeMessage(`[error] ${error.response.data.error}`)\r\n        })\r\n    }else if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\r\n      let personToUpdate = persons.find(p => p.name === person.name)\r\n      //console.log(\"person to update\",personToUpdate)\r\n      phonebookservice\r\n        //.update(updatedPerson)\r\n        .update(personToUpdate,newNumber)\r\n        .then(returnedPerson => {\r\n          console.log(\"successfully updated\",returnedPerson)     \r\n          setPersons(persons.map(p=> p.id !== person.id ? p : returnedPerson))\r\n          setMessage(`Updated ${returnedPerson.name}'s number to ${returnedPerson.number}`)\r\n          setNewName('')\r\n          setNewNumber('')\r\n        }).catch(error => {\r\n          setMessage(\r\n            `ERROR: ${personToUpdate.name} was already removed from server`\r\n          )\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 5000)\r\n          //setPersons(persons.filter(n => n.id !== personToUpdate.id))\r\n        })\r\n    }\r\n    setNewName('')\r\n    setNewNumber('')    \r\n  }\r\n  console.log(\"people \",persons)\r\n  let filteredpersons = persons.filter(p =>\r\n    p.name.toLowerCase().includes(filter.toLowerCase()))\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message}/>\r\n      <Filter filter={filter} handleFilterChange={handleFilterChange}/>\r\n      <h3>add a new</h3>\r\n      <PersonForm newName={newName} newNumber={newNumber} addPerson={addPerson} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange}/>   \r\n      <h2>Numbers</h2>\r\n      <Persons people={filteredpersons} handleDeletePerson={handleDeletePerson}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module"}